package(default_visibility = ["//visibility:public"])

licenses(["notice"])  # BSD/MIT-like license (for zlib)

cc_library(
    name = "cfitsio",
    srcs = [
        "buffers.c",
        "cfileio.c",
        "checksum.c",
        "drvrfile.c",
        "drvrmem.c",
        "drvrnet.c",
        "drvrsmem.c",
        "editcol.c",
        "edithdu.c",
        "eval_l.c",
        "eval_y.c",
        "eval_f.c",
        "fitscore.c",
        "getcol.c",
        "getcolb.c",
        "getcold.c",
        "getcole.c",
        "getcoli.c",
        "getcolj.c",
        "getcolk.c",
        "getcoll.c",
        "getcols.c",
        "getcolsb.c",
        "getcoluk.c",
        "getcolui.c",
        "getcoluj.c",
        "getkey.c",
        "group.c",
        "grparser.c",
        "histo.c",
        "iraffits.c",
        "modkey.c",
        "putcol.c",
        "putcolb.c",
        "putcold.c",
        "putcole.c",
        "putcoli.c",
        "putcolj.c",
        "putcolk.c",
        "putcoluk.c",
        "putcoll.c",
        "putcols.c",
        "putcolsb.c",
        "putcolu.c",
        "putcolui.c",
        "putcoluj.c",
        "putkey.c",
        "region.c",
        "scalnull.c",
        "swapproc.c",
        "wcssub.c",
        "wcsutil.c",
        "imcompress.c",
        "quantize.c",
        "ricecomp.c",
        "pliocomp.c",
        "fits_hcompress.c",
        "fits_hdecompress.c",
        "simplerng.c",
        "zcompress.c",
        "zuncompress.c",
        "fitsio.h",
        "fitsio2.h",
        "longnam.h",
        "drvrsmem.h",
        "group.h",
        "eval_defs.h",
        "grparser.h",
        "eval_tab.h",
        "region.h",
        "simplerng.h"
    ],
    hdrs = [
        "fitsio.h",
        "fitsio2.h",
        "longnam.h",
        "drvrsmem.h"
    ],
    copts = [
        "-DHAVE_STDIO_H=1",
        "-DHAVE_INTTYPES_H=1", 
        "-DHAVE_STDINT_H=1", 
        "-DHAVE_STRINGS_H=1", 
        "-DHAVE_SYS_STAT_H=1", 
        "-DHAVE_SYS_TYPES_H=1",
        "-DHAVE_UNISTD_H=1",
        "-DSTDC_HEADERS=1", 
        "-DHAVE_STDLIB_H=1", 
        "-DHAVE_STRING_H=1", 
        "-DHAVE_MATH_H=1",
        "-DHAVE_LIMITS_H=1", 
        "-D_LARGEFILE_SOURCE=1", 
        "-D_FILE_OFFSET_BITS=64",
        "-DHAVE_LIBZ=1",
        "-DHAVE_FTRUNCATE=1",
        "-DHAVE_LONGLONG=1", 
        "-DHAVE_FMEMOPEN=1",
        "-D_REENTRANT",
        "-Wno-unused-variable",
        "-Wno-comment",
        "-Wno-unused-function",
        "-Wno-unused-value",
        "-Wno-absolute-value",
        "-Wno-uninitialized"
    ],
    includes = ["."],
    deps = ["@zlib//:zlib"]
)